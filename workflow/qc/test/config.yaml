output_dir: test/out
images: test/images

# defaults:
#   datasets:
#     - Lee2020_autoqc

DATASETS:
  Lee2020_autoqc:
    input:
      qc:
        Lee2020: test/input/load_data/harmonize_metadata/Lee2020.zarr
    qc:
      counts: X
      hue:
        - donor
        - development_stage
        - cell_type
      scautoqc_metrics:
        - n_counts
        - n_genes
        - percent_mito
        - percent_ribo
        - percent_hb
      scautoqc_metrics_params: test/scautoqc_params.tsv
      scautoqc_gaussian_kwargs:
        n_components: [1, 2, 3, 4]
        threshold: 0.1

  Lee2020_user_thresholds:
    input:
      qc: 
        Lee2020: test/input/load_data/harmonize_metadata/Lee2020.zarr
        Lee2020_autoqc: test/input/load_data/harmonize_metadata/Lee2020.zarr
    qc:
      counts: X
      hue:
        - donor
        - development_stage
        - cell_type
      thresholds_file: test/input/user_thresholds.tsv

  test:
    input:
      qc:
        test: test/input/pbmc68k.h5ad
        test2: test/input/pbmc68k.h5ad
        test3: test/input/pbmc68k.h5ad
        empty: test/input/empty.zarr
    qc:
      counts: layers/counts
      hue:
        - phase
        - bulk_labels
      thresholds:
        test3:
          n_counts_max: 500
          n_genes_min: 200
          percent_mito_max: 0.5
      thresholds_file: test/input/user_thresholds.tsv