output_dir: test/out
images: test/images

DATASETS:
  blood_pca:
    input:
      batch_analysis: test/input/blood_pca.zarr
    batch_analysis:
      covariates:
        - tech_id
        - donor_id
        - assay
        - sex
        - disease
        - self_reported_ethnicity
        # - development_stage
      permute_covariates:
        - assay
        - sex
        - disease
        - self_reported_ethnicity
      n_permutations: 1000
      max_threads: 50
      sample: tech_id,donor_id
  
  simple:
    input:
      batch_analysis: test/input/blood_pca.zarr
    batch_analysis:
      covariates:
        - assay
      highly_variable_genes:
      pca:

  small:
    input:
      batch_analysis: test/input/pbmc68k.h5ad
    batch_analysis:
      sample: batch, bulk_labels
      n_permutations: 1000
      covariates:
        - bulk_labels
        - batch
        - is_cd14_mono
      normalize:
      highly_variable_genes:
      pca: