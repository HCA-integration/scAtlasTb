output_dir: test/out
images: test/images


DATASETS:
  Lee2020:
    input:
      filter: test/input/load_data/harmonize_metadata/Lee2020.zarr
    filter:
      subset: true
      keep_by_column:
        sex:
          - female
      remove_by_column:
        donor:
          - C19-CB-0008 # value not in data
          - Normal 1
          - nCoV 1
          - Flu 1
      remove_by_query:
         - 'random < 3'
      keep_by_query:
         - 'disease == "influenza"'

  test:
    input:
      filter: test/input/pbmc68k.h5ad
    filter:
      subset: true
      remove_by_column:
        phase:
          - G1
        is_cd14_mono:
          - true

  test_subset:
    input:
      filter: test/input/pbmc68k.h5ad
    filter:
      subset: false
      remove_by_column:
        phase:
          - G1
        is_cd14_mono:
          - true


defaults:
  datasets:
    - test
    - Lee2020